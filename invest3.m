function [x,fval] = invest3(mu,covar,E,feerate)
H=covar*2;
f=[];
A=[
    1,1,1;-mu+feerate*[1,1,1];
    -1,0,0;0,-1,0;0,0,-1;
    1,1,1;-mu+feerate*[1,1,-1];
    -1,0,0;0,-1,0;0,0,1;
    1,1,1;-mu+feerate*[1,-1,1];
    -1,0,0;0,1,0;0,0,-1;
    1,1,1;-mu+feerate*[1,-1,-1];
    -1,0,0;0,1,0;0,0,1;
    1,1,1;-mu+feerate*[-1,1,1];
    1,0,0;0,-1,0;0,0,-1;
    1,1,1;-mu+feerate*[-1,1,-1];
    1,0,0;0,-1,0;0,0,1;
    1,1,1;-mu+feerate*[-1,-1,1];
    1,0,0;0,1,0;0,0,-1;
    1,1,1;-mu+feerate*[-1,-1,-1];
    1,0,0;0,1,0;0,0,1;
    ];
b=[
    1,-E+feerate*(0.5+0.35+0.15),-0.5,-0.35,-0.15;
    1,-E+feerate*(0.5+0.35-0.15),-0.5,-0.35,0.15;
    1,-E+feerate*(0.5-0.35+0.15),-0.5,0.35,-0.15;
    1,-E+feerate*(0.5-0.35-0.15),-0.5,0.35,0.15;
    1,-E+feerate*(-0.5+0.35+0.15),0.5,-0.35,-0.15;
    1,-E+feerate*(-0.5+0.35-0.15),0.5,-0.35,0.15;
    1,-E+feerate*(-0.5-0.35+0.15),0.5,0.35,-0.15;
    1,-E+feerate*(-0.5-0.35-0.15),0.5,0.35,0.15;
    ];
Aeq=[];
beq=[];
lb=[0;0;0];
x=zeros(8,3);
fval=zeros(8,1);
for i=1:1:8
    if ~isempty(quadprog(H,f,A((5*i-4):5*i,:),b(i,:),Aeq,beq,lb))
        [x(i,:),fval(i),exitflag]=quadprog(H,f,A((5*i-4):5*i,:),b(i,:),Aeq,beq,lb);
        if exitflag<=0
            x(i,:)=Inf;
            fval(i)=Inf;
        end
    else
        x(i,:)=Inf;
        fval(i)=Inf;
    end
end
[fval,j]=min(fval);
x=x(j,:);
end